module.exports=[44991,a=>{"use strict";var b=a.i(46099),c=a.i(13712),d=a.i(77813),e=a.i(32354);let f=(0,d.cva)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function g({className:a,variant:d,asChild:g=!1,...h}){let i=g?c.Slot:"span";return(0,b.jsx)(i,{"data-slot":"badge",className:(0,e.cn)(f({variant:d}),a),...h})}a.s(["Badge",()=>g])},53267,a=>{"use strict";var b=a.i(46099),c=a.i(32354);function d({className:a,...d}){return(0,b.jsx)("textarea",{"data-slot":"textarea",className:(0,c.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...d})}a.s(["Textarea",()=>d])},61845,a=>{"use strict";var b=a.i(13024);function c(a){let c=b.useRef({value:a,previous:a});return b.useMemo(()=>(c.current.value!==a&&(c.current.previous=c.current.value,c.current.value=a),c.current.previous),[a])}a.s(["usePrevious",()=>c])},65915,a=>{"use strict";let b=(0,a.i(42312).default)("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);a.s(["Pencil",()=>b],65915)},84694,a=>{"use strict";var b=a.i(46099),c=a.i(13024),d=a.i(72870),e=a.i(98780),f=a.i(91607),g=a.i(81250),h=a.i(74121),i=a.i(53267),j=a.i(32955),k=a.i(44991),l=a.i(25674),m=a.i(37923),n=a.i(8207),o=a.i(65915),p=a.i(67474);let q=(0,a.i(42312).default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var r=a.i(50525),s=a.i(34483),t=a.i(69760),u=a.i(151);function v(){let{user:a}=(0,s.useAuth)(),{toast:v}=(0,t.useToast)(),[w,x]=(0,c.useState)([]),[y,z]=(0,c.useState)([]),[A,B]=(0,c.useState)([]),[C,D]=(0,c.useState)(!0),[E,F]=(0,c.useState)(!1),[G,H]=(0,c.useState)(null),[I,J]=(0,c.useState)({title:"",content:"",documentType:"",accessLevel:"",keywords:""}),K=a?.role==="ADMIN";(0,c.useEffect)(()=>{L()},[]);let L=async()=>{try{let[a,b,c]=await Promise.all([r.documentsApi.getAccessible(),r.locationsApi.getAll(),r.rolesApi.getAll()]);x(a),z(b),B(c)}catch(a){console.error("[v0] Error fetching data:",a),v({title:"Erro ao carregar documentos",variant:"destructive"})}finally{D(!1)}},M=async a=>{a.preventDefault();try{G?(await r.documentsApi.update(G.id,I),v({title:"Documento atualizado com sucesso"})):(await r.documentsApi.create(I),v({title:"Documento criado com sucesso"})),F(!1),H(null),O(),L()}catch(a){v({title:"Erro ao salvar documento",variant:"destructive"})}},N=async a=>{if(confirm("Tem certeza que deseja excluir este documento?"))try{await r.documentsApi.delete(a),v({title:"Documento excluído com sucesso"}),L()}catch(a){v({title:"Erro ao excluir documento",variant:"destructive"})}},O=()=>{J({title:"",content:"",documentType:"",accessLevel:"",keywords:""})};return C?(0,b.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,b.jsx)(n.Loader2,{className:"h-8 w-8 animate-spin text-primary"})}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Documentos Formativos"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Gerencie e acesse os documentos da comunidade"})]}),K&&(0,b.jsxs)(f.Dialog,{open:E,onOpenChange:F,children:[(0,b.jsx)(f.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(d.Button,{onClick:()=>{H(null),O()},children:[(0,b.jsx)(l.Plus,{className:"mr-2 h-4 w-4"}),"Novo Documento"]})}),(0,b.jsxs)(f.DialogContent,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsx)(f.DialogHeader,{children:(0,b.jsx)(f.DialogTitle,{children:G?"Editar Documento":"Novo Documento"})}),(0,b.jsxs)("form",{onSubmit:M,className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{htmlFor:"title",children:"Título"}),(0,b.jsx)(g.Input,{id:"title",value:I.title,onChange:a=>J({...I,title:a.target.value}),placeholder:"Título do documento",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{htmlFor:"content",children:"Conteúdo"}),(0,b.jsx)(i.Textarea,{id:"content",value:I.content,onChange:a=>J({...I,content:a.target.value}),placeholder:"Conteúdo do documento formativo...",rows:8,required:!0})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{htmlFor:"documentType",children:"Tipo de Documento"}),(0,b.jsxs)(j.Select,{value:I.documentType,onValueChange:a=>J({...I,documentType:a}),children:[(0,b.jsx)(j.SelectTrigger,{children:(0,b.jsx)(j.SelectValue,{placeholder:"Selecione o tipo"})}),(0,b.jsx)(j.SelectContent,{children:[{value:"PERSONAL",label:"Personal Document"},{value:"STAGE_SPECIFIC",label:"Stage-Specific Document"},{value:"LOCATION_SPECIFIC",label:"Location-Specific Document"},{value:"GENERAL",label:"General Community Document"}].map(a=>(0,b.jsx)(j.SelectItem,{value:a.value,children:a.label},a.value))})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{htmlFor:"accessLevel",children:"Nível de Acesso"}),(0,b.jsxs)(j.Select,{value:I.accessLevel,onValueChange:a=>J({...I,accessLevel:a}),children:[(0,b.jsx)(j.SelectTrigger,{children:(0,b.jsx)(j.SelectValue,{placeholder:"Selecione o acesso"})}),(0,b.jsx)(j.SelectContent,{children:[{value:"PRIVATE",label:"Private - Author Only"},{value:"RESTRICTED",label:"Restricted - Specific Users/Roles"},{value:"STAGE_BASED",label:"Stage-Based - Users in specific stages"},{value:"LOCATION_BASED",label:"Location-Based - Users in specific locations"},{value:"PUBLIC",label:"Public - All community members"}].map(a=>(0,b.jsx)(j.SelectItem,{value:a.value,children:a.label},a.value))})]})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{htmlFor:"keywords",children:"Palavras-chave"}),(0,b.jsx)(g.Input,{id:"keywords",value:I.keywords,onChange:a=>J({...I,keywords:a.target.value}),placeholder:"formação, espiritualidade, comunidade"})]}),(0,b.jsxs)(f.DialogFooter,{children:[(0,b.jsx)(d.Button,{type:"button",variant:"outline",onClick:()=>F(!1),children:"Cancelar"}),(0,b.jsx)(d.Button,{type:"submit",children:"Salvar"})]})]})]})]})]}),0===w.length?(0,b.jsx)(e.Card,{children:(0,b.jsxs)(e.CardContent,{className:"flex flex-col items-center justify-center py-12",children:[(0,b.jsx)(m.FileText,{className:"mb-4 h-12 w-12 text-muted-foreground"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Nenhum documento disponível"})]})}):(0,b.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:w.map(a=>(0,b.jsxs)(e.Card,{className:"transition-shadow hover:shadow-lg",children:[(0,b.jsxs)(e.CardHeader,{children:[(0,b.jsxs)("div",{className:"flex items-start justify-between",children:[(0,b.jsx)(e.CardTitle,{className:"line-clamp-1 flex-1",children:a.title||"Sem título"}),K&&(0,b.jsxs)("div",{className:"flex gap-1",children:[(0,b.jsx)(d.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>{H(a),J({title:a.title||"",content:a.content||"",documentType:a.documentType||"",accessLevel:a.accessLevel||"",keywords:a.keywords||""}),F(!0)},children:(0,b.jsx)(o.Pencil,{className:"h-3 w-3"})}),(0,b.jsx)(d.Button,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>N(a.id),children:(0,b.jsx)(p.Trash2,{className:"h-3 w-3 text-destructive"})})]})]}),(0,b.jsxs)(e.CardDescription,{className:"line-clamp-2",children:[a.content?.substring(0,100)||"Sem descrição","..."]})]}),(0,b.jsx)(e.CardContent,{children:(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,b.jsx)(k.Badge,{variant:"outline",className:"text-xs",children:a.documentType||"N/A"}),(0,b.jsx)(k.Badge,{variant:(a=>{switch(a){case"PUBLIC":return"default";case"PRIVATE":return"destructive";case"RESTRICTED":return"secondary";default:return"outline"}})(a.accessLevel),className:"text-xs",children:a.accessLevel||"N/A"})]}),a.keywords&&(0,b.jsxs)("div",{className:"text-xs text-muted-foreground",children:[(0,b.jsx)("span",{className:"font-medium",children:"Tags:"})," ",a.keywords]}),(0,b.jsx)(d.Button,{className:"mt-2 w-full bg-transparent",variant:"outline",asChild:!0,children:(0,b.jsxs)(u.default,{href:`/dashboard/documents/${a.id}`,children:[(0,b.jsx)(q,{className:"mr-2 h-4 w-4"}),"Ver Documento"]})})]})})]},a.id))})]})}a.s(["default",()=>v],84694)}];

//# sourceMappingURL=Downloads_religious-community-system%20%282%29_b3e322a8._.js.map