module.exports=[39234,a=>{"use strict";var b=a.i(46099),c=a.i(13024),d=a.i(72870),e=a.i(98780),f=a.i(60479),g=a.i(91607),h=a.i(81250),i=a.i(74121),j=a.i(32955),k=a.i(44991),l=a.i(25674),m=a.i(8207),n=a.i(65915),o=a.i(67474),p=a.i(85831),q=a.i(50525),r=a.i(34483),s=a.i(69760);function t(){let{user:a}=(0,r.useAuth)(),{toast:t}=(0,s.useToast)(),[u,v]=(0,c.useState)([]),[w,x]=(0,c.useState)([]),[y,z]=(0,c.useState)([]),[A,B]=(0,c.useState)(!0),[C,D]=(0,c.useState)(!1),[E,F]=(0,c.useState)(null),[G,H]=(0,c.useState)({name:"",username:"",password:"",roleId:"",missionLocationId:"",lifeStage:"",city:"",state:"",age:"",phone:"",education:"",mentorId:"",communityYears:"",communityMonths:"",isEnabled:!0}),I=a?.role==="ADMIN";(0,c.useEffect)(()=>{I&&J()},[I]);let J=async()=>{try{let[a,b,c]=await Promise.all([q.usersApi.getAll(),q.rolesApi.getAll(),q.locationsApi.getAll()]);v(a),x(b),z(c)}catch(a){t({title:"Erro ao carregar dados",variant:"destructive"})}finally{B(!1)}},K=async a=>{a.preventDefault();try{let a={...G,roleId:G.roleId?Number.parseInt(G.roleId):null,missionLocationId:G.missionLocationId?Number.parseInt(G.missionLocationId):null,mentorId:G.mentorId?Number.parseInt(G.mentorId):null,age:G.age?Number.parseInt(G.age):null,communityYears:G.communityYears?Number.parseInt(G.communityYears):null,communityMonths:G.communityMonths?Number.parseInt(G.communityMonths):null};E?(await q.usersApi.update(E.id,a),t({title:"Usuário atualizado com sucesso"})):(await q.usersApi.create(a),t({title:"Usuário criado com sucesso"})),D(!1),F(null),M(),J()}catch(a){t({title:"Erro ao salvar usuário",variant:"destructive"})}},L=async a=>{if(confirm("Tem certeza que deseja excluir este usuário?"))try{await q.usersApi.delete(a),t({title:"Usuário excluído com sucesso"}),J()}catch(a){t({title:"Erro ao excluir usuário",variant:"destructive"})}},M=()=>{H({name:"",username:"",password:"",roleId:"",missionLocationId:"",lifeStage:"",city:"",state:"",age:"",phone:"",education:"",mentorId:"",communityYears:"",communityMonths:"",isEnabled:!0})};return I?A?(0,b.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,b.jsx)(m.Loader2,{className:"h-8 w-8 animate-spin text-primary"})}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Gestão de Usuários"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Gerencie os membros da comunidade"})]}),(0,b.jsxs)(g.Dialog,{open:C,onOpenChange:D,children:[(0,b.jsx)(g.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(d.Button,{onClick:()=>{F(null),M()},children:[(0,b.jsx)(l.Plus,{className:"mr-2 h-4 w-4"}),"Novo Usuário"]})}),(0,b.jsxs)(g.DialogContent,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsx)(g.DialogHeader,{children:(0,b.jsx)(g.DialogTitle,{children:E?"Editar Usuário":"Novo Usuário"})}),(0,b.jsxs)("form",{onSubmit:K,className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-muted-foreground mb-4",children:"Informações Básicas"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)(i.Label,{htmlFor:"name",className:"block mb-2",children:[" ","Nome Completo"]}),(0,b.jsx)(h.Input,{id:"name",value:G.name,onChange:a=>H({...G,name:a.target.value}),placeholder:"João da Silva",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)(i.Label,{htmlFor:"username",className:"block mb-2",children:[" ","Nome de Usuário"]}),(0,b.jsx)(h.Input,{id:"username",value:G.username,onChange:a=>H({...G,username:a.target.value}),placeholder:"joao.silva",required:!0})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)(i.Label,{htmlFor:"password",className:"block mb-2",children:[" ","Senha ",E&&"(deixe em branco para manter)"]}),(0,b.jsx)(h.Input,{id:"password",type:"password",value:G.password,onChange:a=>H({...G,password:a.target.value}),placeholder:"••••••••",required:!E})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-muted-foreground mb-4",children:"Contato e Localização"}),(0,b.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)(i.Label,{htmlFor:"age",className:"block mb-2",children:[" ","Idade"]}),(0,b.jsx)(h.Input,{id:"age",type:"number",value:G.age,onChange:a=>H({...G,age:a.target.value}),placeholder:"25"})]}),(0,b.jsxs)("div",{className:"col-span-2",children:[(0,b.jsxs)(i.Label,{htmlFor:"phone",className:"block mb-2",children:[" ","Telefone"]}),(0,b.jsx)(h.Input,{id:"phone",value:G.phone,onChange:a=>H({...G,phone:a.target.value}),placeholder:"(11) 98765-4321"})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)(i.Label,{htmlFor:"city",className:"block mb-2",children:[" ","Cidade"]}),(0,b.jsx)(h.Input,{id:"city",value:G.city,onChange:a=>H({...G,city:a.target.value}),placeholder:"São Paulo",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)(i.Label,{htmlFor:"state",className:"block mb-2",children:[" ","Estado"]}),(0,b.jsx)(h.Input,{id:"state",value:G.state,onChange:a=>H({...G,state:a.target.value}),placeholder:"SP",required:!0})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)(i.Label,{htmlFor:"education",className:"block mb-2",children:[" ","Escolaridade"]}),(0,b.jsx)(h.Input,{id:"education",value:G.education,onChange:a=>H({...G,education:a.target.value}),placeholder:"Ensino Superior Completo"})]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsx)("h3",{className:"text-sm font-semibold text-muted-foreground mb-4",children:"Informações da Comunidade"}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)(i.Label,{htmlFor:"roleId",className:"block mb-2",children:[" ","Papel"]}),(0,b.jsxs)(j.Select,{value:G.roleId,onValueChange:a=>H({...G,roleId:a}),children:[(0,b.jsx)(j.SelectTrigger,{children:(0,b.jsx)(j.SelectValue,{placeholder:"Selecione um papel"})}),(0,b.jsx)(j.SelectContent,{children:w.map(a=>(0,b.jsx)(j.SelectItem,{value:a.id.toString(),children:a.name},a.id))})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)(i.Label,{htmlFor:"missionLocationId",className:"block mb-2",children:[" ","Local de Missão"]}),(0,b.jsxs)(j.Select,{value:G.missionLocationId,onValueChange:a=>H({...G,missionLocationId:a}),children:[(0,b.jsx)(j.SelectTrigger,{children:(0,b.jsx)(j.SelectValue,{placeholder:"Selecione um local"})}),(0,b.jsxs)(j.SelectContent,{children:[(0,b.jsx)(j.SelectItem,{value:"none",children:"Nenhum"}),y.map(a=>(0,b.jsx)(j.SelectItem,{value:a.id.toString(),children:a.name},a.id))]})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)(i.Label,{htmlFor:"lifeStage",className:"block mb-2",children:[" ","Etapa Formativa"]}),(0,b.jsxs)(j.Select,{value:G.lifeStage,onValueChange:a=>H({...G,lifeStage:a}),children:[(0,b.jsx)(j.SelectTrigger,{children:(0,b.jsx)(j.SelectValue,{placeholder:"Selecione uma etapa"})}),(0,b.jsx)(j.SelectContent,{children:[{value:"MISSION_ASSISTANT",label:"Auxiliar de Missão"},{value:"VOCATIONAL",label:"Vocacionado"},{value:"ASPIRANCY",label:"Aspirante"},{value:"DISCIPLESHIP",label:"Discipleship"},{value:"DISCIPLESHIP_IN_MISSION",label:"Discípulo em Missão"},{value:"CONSECRATED_PERMANENT",label:"Consagrado permanente"}].map(a=>(0,b.jsx)(j.SelectItem,{value:a.value,children:a.label},a.value))})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)(i.Label,{htmlFor:"mentorId",className:"block mb-2",children:[" ","Mentor"]}),(0,b.jsxs)(j.Select,{value:G.mentorId,onValueChange:a=>H({...G,mentorId:a}),children:[(0,b.jsx)(j.SelectTrigger,{children:(0,b.jsx)(j.SelectValue,{placeholder:"Selecione um mentor"})}),(0,b.jsxs)(j.SelectContent,{children:[(0,b.jsx)(j.SelectItem,{value:"none",children:"Nenhum"}),u.map(a=>(0,b.jsx)(j.SelectItem,{value:a.id.toString(),children:a.name},a.id))]})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)(i.Label,{htmlFor:"communityYears",className:"block mb-2",children:[" ","Anos na Comunidade"]}),(0,b.jsx)(h.Input,{id:"communityYears",type:"number",value:G.communityYears,onChange:a=>H({...G,communityYears:a.target.value}),placeholder:"2",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)(i.Label,{htmlFor:"communityMonths",className:"block mb-2",children:[" ","Meses na Comunidade"]}),(0,b.jsx)(h.Input,{id:"communityMonths",type:"number",value:G.communityMonths,onChange:a=>H({...G,communityMonths:a.target.value}),placeholder:"6"})]})]})]}),(0,b.jsxs)(g.DialogFooter,{children:[(0,b.jsx)(d.Button,{type:"button",variant:"outline",onClick:()=>D(!1),children:"Cancelar"}),(0,b.jsx)(d.Button,{type:"submit",children:"Salvar"})]})]})]})]})]}),(0,b.jsx)(e.Card,{children:(0,b.jsx)(e.CardContent,{className:"p-0",children:(0,b.jsxs)(f.Table,{children:[(0,b.jsx)(f.TableHeader,{children:(0,b.jsxs)(f.TableRow,{children:[(0,b.jsx)(f.TableHead,{children:"Nome"}),(0,b.jsx)(f.TableHead,{children:"Usuário"}),(0,b.jsx)(f.TableHead,{children:"Papel"}),(0,b.jsx)(f.TableHead,{children:"Etapa"}),(0,b.jsx)(f.TableHead,{children:"Local"}),(0,b.jsx)(f.TableHead,{children:"Tempo"}),(0,b.jsx)(f.TableHead,{className:"text-right",children:"Ações"})]})}),(0,b.jsx)(f.TableBody,{children:0===u.length?(0,b.jsx)(f.TableRow,{children:(0,b.jsx)(f.TableCell,{colSpan:7,className:"text-center text-muted-foreground",children:"Nenhum usuário encontrado"})}):u.map(a=>(0,b.jsxs)(f.TableRow,{children:[(0,b.jsx)(f.TableCell,{className:"font-medium",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(p.User,{className:"h-4 w-4 text-muted-foreground"}),a.name]})}),(0,b.jsx)(f.TableCell,{children:a.username}),(0,b.jsx)(f.TableCell,{children:a.role?(0,b.jsx)(k.Badge,{variant:"secondary",children:a.role.name}):(0,b.jsx)("span",{className:"text-muted-foreground",children:"N/A"})}),(0,b.jsx)(f.TableCell,{className:"text-sm",children:a.lifeStage||"N/A"}),(0,b.jsx)(f.TableCell,{className:"text-sm",children:a.missionLocation?.name||"N/A"}),(0,b.jsx)(f.TableCell,{className:"text-sm",children:a.communityYears||a.communityMonths?(0,b.jsxs)("span",{children:[a.communityYears?`${a.communityYears}a`:"",a.communityMonths?` ${a.communityMonths}m`:""]}):"N/A"}),(0,b.jsx)(f.TableCell,{className:"text-right",children:(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,b.jsx)(d.Button,{variant:"ghost",size:"icon",onClick:()=>{F(a),H({name:a.name||"",username:a.username||"",password:"",roleId:a.role?.id?.toString()||"",missionLocationId:a.missionLocation?.name?.toString()||"",lifeStage:a.lifeStage||"",city:a.city||"",state:a.state||"",age:a.age?.toString()||"",phone:a.phone||"",education:a.education||"",mentorId:a.mentor?.id?.toString()||"",communityYears:a.communityYears?.toString()||"",communityMonths:a.communityMonths?.toString()||"",isEnabled:a.isEnabled??!0}),D(!0)},children:(0,b.jsx)(n.Pencil,{className:"h-4 w-4"})}),(0,b.jsx)(d.Button,{variant:"ghost",size:"icon",onClick:()=>L(a.id),children:(0,b.jsx)(o.Trash2,{className:"h-4 w-4 text-destructive"})})]})})]},a.id))})]})})})]}):(0,b.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,b.jsx)(e.Card,{children:(0,b.jsx)(e.CardContent,{className:"p-6",children:(0,b.jsx)("p",{className:"text-muted-foreground",children:"Você não tem permissão para acessar esta página."})})})})}a.s(["default",()=>t])}];

//# sourceMappingURL=Downloads_religious-community-system%20%282%29_app_dashboard_users_page_tsx_16f6c895._.js.map