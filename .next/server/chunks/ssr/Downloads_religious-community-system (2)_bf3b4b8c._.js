module.exports=[53267,a=>{"use strict";var b=a.i(46099),c=a.i(32354);function d({className:a,...d}){return(0,b.jsx)("textarea",{"data-slot":"textarea",className:(0,c.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...d})}a.s(["Textarea",()=>d])},61845,a=>{"use strict";var b=a.i(13024);function c(a){let c=b.useRef({value:a,previous:a});return b.useMemo(()=>(c.current.value!==a&&(c.current.previous=c.current.value,c.current.value=a),c.current.previous),[a])}a.s(["usePrevious",()=>c])},65915,a=>{"use strict";let b=(0,a.i(42312).default)("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);a.s(["Pencil",()=>b],65915)},60479,a=>{"use strict";var b=a.i(46099),c=a.i(32354);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,b.jsx)("table",{"data-slot":"table",className:(0,c.cn)("w-full caption-bottom text-sm",a),...d})})}function e({className:a,...d}){return(0,b.jsx)("thead",{"data-slot":"table-header",className:(0,c.cn)("[&_tr]:border-b",a),...d})}function f({className:a,...d}){return(0,b.jsx)("tbody",{"data-slot":"table-body",className:(0,c.cn)("[&_tr:last-child]:border-0",a),...d})}function g({className:a,...d}){return(0,b.jsx)("tr",{"data-slot":"table-row",className:(0,c.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",a),...d})}function h({className:a,...d}){return(0,b.jsx)("th",{"data-slot":"table-head",className:(0,c.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...d})}function i({className:a,...d}){return(0,b.jsx)("td",{"data-slot":"table-cell",className:(0,c.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),...d})}a.s(["Table",()=>d,"TableBody",()=>f,"TableCell",()=>i,"TableHead",()=>h,"TableHeader",()=>e,"TableRow",()=>g])},29910,a=>{"use strict";var b=a.i(46099),c=a.i(13024),d=a.i(72870),e=a.i(98780),f=a.i(60479),g=a.i(91607),h=a.i(81250),i=a.i(74121),j=a.i(53267),k=a.i(32955),l=a.i(25674),m=a.i(8207),n=a.i(65915),o=a.i(67474),p=a.i(2339),q=a.i(88991),r=a.i(50525),s=a.i(34483),t=a.i(69760);function u(){let{user:a}=(0,s.useAuth)(),{toast:u}=(0,t.useToast)(),[v,w]=(0,c.useState)([]),[x,y]=(0,c.useState)([]),[z,A]=(0,c.useState)(!0),[B,C]=(0,c.useState)(!1),[D,E]=(0,c.useState)(null),[F,G]=(0,c.useState)({name:"",description:"",city:"",state:"",country:"Brasil",address:"",postalCode:"",coordinatorId:null}),H=a?.role==="ADMIN"||a?.role==="COORDINATOR";(0,c.useEffect)(()=>{I(),J()},[]);let I=async()=>{try{let a=await r.locationsApi.getAll();w(a)}catch(a){u({title:"Erro ao carregar locais",variant:"destructive"})}finally{A(!1)}},J=async()=>{try{let a=await r.usersApi.getAll();y(a)}catch(a){console.error("Erro ao carregar usuários")}},K=async a=>{a.preventDefault();try{D?(await r.locationsApi.update(D.id,F),u({title:"Local atualizado com sucesso"})):(await r.locationsApi.create(F),u({title:"Local criado com sucesso"})),C(!1),E(null),G({name:"",description:"",city:"",state:"",country:"Brasil",address:"",postalCode:"",coordinatorId:null}),I()}catch(a){u({title:"Erro ao salvar local",variant:"destructive"})}},L=async a=>{if(confirm("Tem certeza que deseja excluir este local?"))try{await r.locationsApi.delete(a),u({title:"Local excluído com sucesso"}),I()}catch(a){u({title:"Erro ao excluir local",variant:"destructive"})}};return H?z?(0,b.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,b.jsx)(m.Loader2,{className:"h-8 w-8 animate-spin text-primary"})}):(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Gestão de Locais"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Gerencie os locais de missão e recantos"})]}),(0,b.jsxs)(g.Dialog,{open:B,onOpenChange:C,children:[(0,b.jsx)(g.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(d.Button,{onClick:()=>{E(null),G({name:"",description:"",city:"",state:"",country:"Brasil",address:"",postalCode:"",coordinatorId:null})},children:[(0,b.jsx)(l.Plus,{className:"mr-2 h-4 w-4"}),"Novo Local"]})}),(0,b.jsxs)(g.DialogContent,{className:"max-w-2xl",children:[(0,b.jsx)(g.DialogHeader,{children:(0,b.jsx)(g.DialogTitle,{children:D?"Editar Local":"Novo Local"})}),(0,b.jsxs)("form",{onSubmit:K,className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(i.Label,{htmlFor:"name",children:"Nome do Local"}),(0,b.jsx)(h.Input,{id:"name",value:F.name,onChange:a=>G({...F,name:a.target.value}),placeholder:"Ex: Recanto São Francisco",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(i.Label,{htmlFor:"description",children:"Descrição"}),(0,b.jsx)(j.Textarea,{id:"description",value:F.description,onChange:a=>G({...F,description:a.target.value}),placeholder:"Descreva este local de missão",rows:2})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(i.Label,{htmlFor:"address",children:"Endereço"}),(0,b.jsx)(h.Input,{id:"address",value:F.address,onChange:a=>G({...F,address:a.target.value}),placeholder:"Rua, Número, Bairro"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(i.Label,{htmlFor:"city",children:"Cidade"}),(0,b.jsx)(h.Input,{id:"city",value:F.city,onChange:a=>G({...F,city:a.target.value}),placeholder:"São Paulo",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(i.Label,{htmlFor:"state",children:"Estado"}),(0,b.jsx)(h.Input,{id:"state",value:F.state,onChange:a=>G({...F,state:a.target.value}),placeholder:"SP",required:!0})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(i.Label,{htmlFor:"country",children:"País"}),(0,b.jsx)(h.Input,{id:"country",value:F.country,onChange:a=>G({...F,country:a.target.value}),placeholder:"Brasil"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(i.Label,{htmlFor:"postalCode",children:"CEP"}),(0,b.jsx)(h.Input,{id:"postalCode",value:F.postalCode,onChange:a=>G({...F,postalCode:a.target.value}),placeholder:"00000-000"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(i.Label,{htmlFor:"coordinator",children:"Coordenador"}),(0,b.jsxs)(k.Select,{value:F.coordinatorId?.toString()||"none",onValueChange:a=>G({...F,coordinatorId:"none"===a?null:Number(a)}),children:[(0,b.jsx)(k.SelectTrigger,{children:(0,b.jsx)(k.SelectValue,{placeholder:"Selecione um coordenador"})}),(0,b.jsxs)(k.SelectContent,{children:[(0,b.jsx)(k.SelectItem,{value:"none",children:"Nenhum"}),x.map(a=>(0,b.jsxs)(k.SelectItem,{value:a.id.toString(),children:[a.name," (",a.username,")"]},a.id))]})]})]}),(0,b.jsxs)(g.DialogFooter,{children:[(0,b.jsx)(d.Button,{type:"button",variant:"outline",onClick:()=>C(!1),children:"Cancelar"}),(0,b.jsx)(d.Button,{type:"submit",children:"Salvar"})]})]})]})]})]}),(0,b.jsx)(e.Card,{children:(0,b.jsx)(e.CardContent,{className:"p-0",children:(0,b.jsxs)(f.Table,{children:[(0,b.jsx)(f.TableHeader,{children:(0,b.jsxs)(f.TableRow,{children:[(0,b.jsx)(f.TableHead,{children:"Nome"}),(0,b.jsx)(f.TableHead,{children:"Endereço Completo"}),(0,b.jsx)(f.TableHead,{children:"Coordenador"}),(0,b.jsx)(f.TableHead,{children:"Membros"}),(0,b.jsx)(f.TableHead,{className:"text-right",children:"Ações"})]})}),(0,b.jsx)(f.TableBody,{children:0===v.length?(0,b.jsx)(f.TableRow,{children:(0,b.jsx)(f.TableCell,{colSpan:5,className:"text-center text-muted-foreground",children:"Nenhum local encontrado"})}):v.map(a=>(0,b.jsxs)(f.TableRow,{children:[(0,b.jsx)(f.TableCell,{className:"font-medium",children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(p.MapPin,{className:"h-4 w-4 text-primary"}),a.name]})}),(0,b.jsx)(f.TableCell,{children:(0,b.jsxs)("div",{className:"text-sm",children:[a.address&&(0,b.jsx)("div",{children:a.address}),(0,b.jsxs)("div",{children:[a.city," - ",a.state,a.postalCode&&` (${a.postalCode})`]})]})}),(0,b.jsx)(f.TableCell,{children:a.coordinator?.name||"Sem coordenador"}),(0,b.jsx)(f.TableCell,{children:(0,b.jsxs)("div",{className:"flex items-center gap-1",children:[(0,b.jsx)(q.Users,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsx)("span",{children:a.userCount||0})]})}),(0,b.jsx)(f.TableCell,{className:"text-right",children:(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,b.jsx)(d.Button,{variant:"ghost",size:"icon",onClick:()=>{E(a),G({name:a.name,description:a.description||"",city:a.city||"",state:a.state||"",country:a.country||"Brasil",address:a.address||"",postalCode:a.postalCode||"",coordinatorId:a.coordinator?.id||null}),C(!0)},children:(0,b.jsx)(n.Pencil,{className:"h-4 w-4"})}),(0,b.jsx)(d.Button,{variant:"ghost",size:"icon",onClick:()=>L(a.id),children:(0,b.jsx)(o.Trash2,{className:"h-4 w-4 text-destructive"})})]})})]},a.id))})]})})})]}):(0,b.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,b.jsx)(e.Card,{children:(0,b.jsx)(e.CardContent,{className:"p-6",children:(0,b.jsx)("p",{className:"text-muted-foreground",children:"Você não tem permissão para acessar esta página."})})})})}a.s(["default",()=>u])}];

//# sourceMappingURL=Downloads_religious-community-system%20%282%29_bf3b4b8c._.js.map