module.exports=[65915,a=>{"use strict";let b=(0,a.i(42312).default)("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);a.s(["Pencil",()=>b],65915)},53267,a=>{"use strict";var b=a.i(46099),c=a.i(32354);function d({className:a,...d}){return(0,b.jsx)("textarea",{"data-slot":"textarea",className:(0,c.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...d})}a.s(["Textarea",()=>d])},21583,a=>{"use strict";var b=a.i(46099),c=a.i(13024),d=a.i(72870),e=a.i(98780),f=a.i(91607),g=a.i(81250),h=a.i(74121),i=a.i(53267),j=a.i(25674),k=a.i(8207),l=a.i(65915),m=a.i(67474);let n=(0,a.i(42312).default)("FolderTree",[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]]);var o=a.i(3963),o=o,p=a.i(50525),q=a.i(34483),r=a.i(69760);function s(){let{user:a}=(0,q.useAuth)(),{toast:s}=(0,r.useToast)(),[t,u]=(0,c.useState)([]),[v,w]=(0,c.useState)(!0),[x,y]=(0,c.useState)(!1),[z,A]=(0,c.useState)(null),[B,C]=(0,c.useState)({name:"",description:"",parentId:null}),[D,E]=(0,c.useState)(new Set),F=a?.role==="ADMIN";(0,c.useEffect)(()=>{G()},[]);let G=async()=>{try{let a=await p.categoriesApi.getRoot();u(a)}catch(a){s({title:"Erro ao carregar categorias",variant:"destructive"})}finally{w(!1)}},H=async a=>{a.preventDefault();try{z?(await p.categoriesApi.update(z.id,B),s({title:"Categoria atualizada com sucesso"})):(await p.categoriesApi.create(B),s({title:"Categoria criada com sucesso"})),y(!1),A(null),C({name:"",description:"",parentId:null}),G()}catch(a){s({title:"Erro ao salvar categoria",variant:"destructive"})}},I=async a=>{if(confirm("Tem certeza que deseja excluir esta categoria?"))try{await p.categoriesApi.delete(a),s({title:"Categoria excluída com sucesso"}),G()}catch(a){s({title:"Erro ao excluir categoria",variant:"destructive"})}};if(!F)return(0,b.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,b.jsx)(e.Card,{children:(0,b.jsx)(e.CardContent,{className:"p-6",children:(0,b.jsx)("p",{className:"text-muted-foreground",children:"Você não tem permissão para acessar esta página."})})})});if(v)return(0,b.jsx)("div",{className:"flex h-full items-center justify-center",children:(0,b.jsx)(k.Loader2,{className:"h-8 w-8 animate-spin text-primary"})});let J=({category:a,level:c=0})=>{let e=a.subcategories&&a.subcategories.length>0,f=D.has(a.id);return(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"flex items-center justify-between rounded-lg p-3 hover:bg-accent",style:{paddingLeft:`${1.5*c+.75}rem`},children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[e&&(0,b.jsx)(d.Button,{variant:"ghost",size:"icon",className:"h-6 w-6",onClick:()=>{var b;let c;return b=a.id,void((c=new Set(D)).has(b)?c.delete(b):c.add(b),E(c))},children:(0,b.jsx)(o.default,{className:`h-4 w-4 transition-transform ${f?"rotate-90":""}`})}),(0,b.jsx)(n,{className:"h-4 w-4 text-muted-foreground"}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium",children:a.name}),a.description&&(0,b.jsx)("p",{className:"text-xs text-muted-foreground",children:a.description})]})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(d.Button,{variant:"ghost",size:"icon",onClick:()=>{A(a),C({name:a.name,description:a.description||"",parentId:a.parentId}),y(!0)},children:(0,b.jsx)(l.Pencil,{className:"h-4 w-4"})}),(0,b.jsx)(d.Button,{variant:"ghost",size:"icon",onClick:()=>I(a.id),children:(0,b.jsx)(m.Trash2,{className:"h-4 w-4 text-destructive"})})]})]}),f&&e&&(0,b.jsx)("div",{children:a.subcategories.map(a=>(0,b.jsx)(J,{category:a,level:c+1},a.id))})]})};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Gestão de Categorias"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Organize os documentos em categorias e subcategorias"})]}),(0,b.jsxs)(f.Dialog,{open:x,onOpenChange:y,children:[(0,b.jsx)(f.DialogTrigger,{asChild:!0,children:(0,b.jsxs)(d.Button,{onClick:()=>{A(null),C({name:"",description:"",parentId:null})},children:[(0,b.jsx)(j.Plus,{className:"mr-2 h-4 w-4"}),"Nova Categoria"]})}),(0,b.jsxs)(f.DialogContent,{children:[(0,b.jsx)(f.DialogHeader,{children:(0,b.jsx)(f.DialogTitle,{children:z?"Editar Categoria":"Nova Categoria"})}),(0,b.jsxs)("form",{onSubmit:H,className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{htmlFor:"name",children:"Nome da Categoria"}),(0,b.jsx)(g.Input,{id:"name",value:B.name,onChange:a=>C({...B,name:a.target.value}),placeholder:"Ex: Documentos Oficiais",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{htmlFor:"description",children:"Descrição"}),(0,b.jsx)(i.Textarea,{id:"description",value:B.description,onChange:a=>C({...B,description:a.target.value}),placeholder:"Descreva o propósito desta categoria",rows:3})]}),(0,b.jsxs)(f.DialogFooter,{children:[(0,b.jsx)(d.Button,{type:"button",variant:"outline",onClick:()=>y(!1),children:"Cancelar"}),(0,b.jsx)(d.Button,{type:"submit",children:"Salvar"})]})]})]})]})]}),(0,b.jsx)(e.Card,{children:(0,b.jsx)(e.CardContent,{className:"p-4",children:0===t.length?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,b.jsx)(n,{className:"mb-4 h-12 w-12 text-muted-foreground"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Nenhuma categoria encontrada"})]}):(0,b.jsx)("div",{className:"space-y-2",children:t.map(a=>(0,b.jsx)(J,{category:a},a.id))})})})]})}a.s(["default",()=>s],21583)}];

//# sourceMappingURL=Downloads_religious-community-system%20%282%29_b76ed0d8._.js.map